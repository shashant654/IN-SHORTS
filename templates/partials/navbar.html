<nav
  class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-lg"
  style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)"
>
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center" href="/">
      <i class="bi bi-shop-window me-2" style="font-size: 1.5rem"></i>
      <span class="fw-bold">IN-SHORTS</span>
    </a>

    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item mx-1">
          <a class="nav-link position-relative" href="{% url 'home' %}">
            <i class="bi bi-house-door me-1"></i> Home
            <span
              class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle"
            ></span>
          </a>
        </li>
        <li class="nav-item mx-1">
          <a class="nav-link" href="">
            <i class="bi bi-info-circle me-1"></i> About
          </a>
        </li>
        <li class="nav-item mx-1">
          <a class="nav-link" href="">
            <i class="bi bi-headset me-1"></i> Contact
          </a>
        </li>
        <li class="nav-item mx-1">
          <a class="nav-link" href="">
            <i class="bi bi-grid me-1"></i> Categories
          </a>
        </li>
        <li class="nav-item mx-1">
          {% if user.is_authenticated %}
           {% if user.can_upload_news or user.subscription_active %}
          <a href="{% url 'upload_article' %}">Upload Article</a>
          {% endif %}
           {% endif %}
        </li>
      </ul>

      <ul class="navbar-nav ms-auto">
        {% if user.is_authenticated %}
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle d-flex align-items-center py-2 px-3 rounded-3"
            href="#"
            id="navbarDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            style="
              transition: all 0.3s ease;
              background: rgba(23, 162, 184, 0.1);
            "
          >
            <i
              class="bi bi-person-circle me-2"
              style="color: #17a2b8; font-size: 1.2rem"
            ></i>
            <span>Profile</span>
          </a>
          <ul
            class="dropdown-menu dropdown-menu-end border-0 shadow-lg mt-2"
            style="
              background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
              min-width: 240px;
              border-radius: 0.5rem;
              overflow: hidden;
            "
          >
            <li
              class="px-3 py-2"
              style="
                background: rgba(23, 162, 184, 0.1);
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
              "
            >
              <div class="d-flex align-items-center">
                <i
                  class="bi bi-person-circle me-2"
                  style="color: #17a2b8; font-size: 1.5rem"
                ></i>
                <div>
                  <h6 class="mb-0 text-white">{{ user.username }}</h6>
                  <small class="text-muted">{{ user.email }}</small>
                </div>
              </div>
            </li>
            <li>
              <a
                class="dropdown-item d-flex align-items-center py-2 px-3"
                href="{% url 'my_profile' %}"
                style="color: #fff; transition: all 0.2s ease"
              >
                <i class="bi bi-person me-2" style="color: #1abc9c"></i>
                <span>My Profile</span>
                <i class="bi bi-chevron-right ms-auto text-muted"></i>
              </a>
            </li>

            <li>
              <a
                class="dropdown-item d-flex align-items-center py-2 px-3"
                href="{% url 'my_subscriptions' %}"
                style="color: #fff; transition: all 0.2s ease"
              >
                <i class="bi bi-box-seam me-2" style="color: #1abc9c"></i>
                <span>My Subscriptions</span>
                <i class="bi bi-chevron-right ms-auto text-muted"></i>
              </a>
            </li>
            <li>
    <a
        class="dropdown-item d-flex align-items-center py-2 px-3"
        href="{% url 'my_articles' %}"
        style="color: #fff; transition: all 0.2s ease"
    >
        <i class="bi bi-newspaper me-2" style="color: #1abc9c"></i>
        <span>My Articles</span>
        <i class="bi bi-chevron-right ms-auto text-muted"></i>
    </a>
</li>
            <li>
              {% comment %}
              <a
                class="dropdown-item d-flex align-items-center py-2 px-3"
                href="{% url 'subscription_plans' %}"
                style="color: #fff; transition: all 0.2s ease"
              >
                <i class="bi bi-credit-card me-2" style="color: #1abc9c"></i>
                <span>Subscription Plans</span>
                <i class="bi bi-chevron-right ms-auto text-muted"></i>
              </a>
              {% endcomment %}
            </li>

            <li>
              <hr
                class="dropdown-divider my-1"
                style="border-color: rgba(255, 255, 255, 0.05)"
              />
            </li>
            <li>
              <a
                class="dropdown-item d-flex align-items-center py-2 px-3"
                href="{% url 'logout_page' %}"
                style="color: #ff6b6b; transition: all 0.2s ease"
              >
                <i class="bi bi-box-arrow-right me-2"></i>
                <span>Logout</span>
                <i class="bi bi-chevron-right ms-auto text-muted"></i>
              </a>
            </li>
          </ul>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'login_page' %}">
            <i class="bi bi-box-arrow-in-right me-1"></i> Login
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'register' %}">
            <i class="bi bi-person-plus me-1"></i> Register
          </a>
        </li>
        {% endif %}
      </ul>
      <form class="form-inline my-2 my-lg-0" action="" method="GET">
        <div class="input-group">
          <input
            class="form-control"
            type="search"
            name="q"
            placeholder="Search products..."
            aria-label="Search"
            value=""
          />
          <div class="input-group-append">
            <button class="btn btn-outline-light" type="submit">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</nav>

<style>
  /* Profile dropdown hover effects */
  .nav-link.dropdown-toggle:hover {
    background: rgba(23, 162, 184, 0.2) !important;
    transform: translateY(-2px);
  }

  .dropdown-item:hover {
    background: rgba(23, 162, 184, 0.2) !important;
    padding-left: 1.5rem !important;
  }

  /* Smooth dropdown animation */
  .dropdown-menu {
    transform-origin: top right;
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
